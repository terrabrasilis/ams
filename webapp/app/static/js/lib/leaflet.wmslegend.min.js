L.Control.WMSLegend=L.Control.extend({options:{position:"middleright",uri:"",static:{deter:{url:""},af:{url:""},risk:{url:""},fs:{url:""}}},onAdd:function(){let controlClassName="leaflet-control-wms-legend",legendClassName="wms-legend";this.fcontainer=L.DomUtil.create("div","leaflet-control-legend"),this.ll=L.DomUtil.create("span","label-legend",this.fcontainer),this.ll.innerText="LEGENDA";let container=L.DomUtil.create("div",controlClassName,this.fcontainer);this.options.static.deter.url&&this.createLegendImage(container,"DETER","DETER Legend","wms-legend",this.options.static.deter.url),this.options.static.af.url&&this.createLegendImage(container,"Focos de Queimadas","Active Fires Legend","wms-legend",this.options.static.af.url),this.options.static.risk.url&&this.createLegendImage(container,"Risco de desmatamento (IBAMA)","IBAMA Risk Legend","wms-legend",this.options.static.risk.url),this.options.static.fs.url&&this.createLegendImage(container,"Risco de Espalhamento do Fogo","Fire Spreading Risk Legend","wms-legend",this.options.static.fs.url),this.img=this.createLegendImage(container,ams.Map.PopupControl._prefix+ams.Map.PopupControl._text,"Spatial Unit Legend","wms-legend",this.options.uri);let stop=L.DomEvent.stopPropagation;return L.DomEvent.on(this.fcontainer,"click",this._click,this).on(this.ll,"click",this._click,this).on(this.img,"click",this._click,this).on(container,"click",this._click,this).on(this.img,"mousedown",stop).on(this.img,"dblclick",stop).on(this.img,"click",L.DomEvent.preventDefault).on(this.img,"click",stop),this.height=null,this.width=null,this.container=container,this.fcontainer},_click:function(e){var style;L.DomEvent.stopPropagation(e),L.DomEvent.preventDefault(e),"none"===window.getComputedStyle(this.container).display?(this.fcontainer.style.height=this.height+"px",this.fcontainer.style.width=this.width+"px",this.container.style.display=this.displayStyle,this.ll.style.display="none"):(null===this.width&&null===this.height&&(this.height=this.fcontainer.offsetHeight,this.width=this.fcontainer.offsetWidth),this.displayStyle=this.container.style.display,this.container.style.display="none",this.ll.style.display="inline",this.fcontainer.style.height="fit-content",this.fcontainer.style.width="20px")},createLegendImage:function(container,text,alt,legendClassName,url){let ldl;L.DomUtil.create("span","wms-label-legend",container).innerText=text;let dl=L.DomUtil.create("img",legendClassName,container);dl.alt=alt;const options={headers:{Authorization:"Bearer "+AuthenticationService.getToken()},credentials:"omit",cache:"no-cache"};return fetch(url,options).then(res=>res.blob()).then(blob=>{dl.src=URL.createObjectURL(blob)}),dl}}),L.wmsLegend=function(uri){var wmsLegendControl=new L.Control.WMSLegend;return wmsLegendControl.options.uri=uri,map.addControl(wmsLegendControl),wmsLegendControl};