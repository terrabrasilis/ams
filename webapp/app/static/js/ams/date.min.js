var ams=ams||{};ams.Date={DateController:function(){this.startdate,this.enddate,this.prevdate,this.period,this.maxdate,this.customDays=0,this.toNext=function(){let nextdate=this.getNext();this.hasNext(nextdate)&&this.setPeriod(this.toUTCDate(nextdate),this.period)},this.getNext=function(){let numDays=this.getNumberOfDays(),sdate=new Date(this.startdate+"T00:00:00"),nextdate=new Date(sdate);return nextdate.setUTCDate(sdate.getUTCDate()+numDays),nextdate},this.hasNext=function(refdate){return this.maxdate&&refdate<=this.maxdate},this.toPrevious=function(){this.maxdate||(this.maxdate=new Date(this.startdate+"T00:00:00")),this.setPeriod(this.enddate,this.period)},this.toUTCDate=function(date){let uday=date.getUTCDate(),day=uday<10?"0"+uday:uday,umonth=date.getUTCMonth()+1,month=umonth<10?"0"+umonth:umonth;return`${date.getUTCFullYear()}-${month}-${day}`},this.getNumberOfDays=function(){let numDays=0;return"7d"==this.period?numDays=7:"15d"==this.period?numDays=15:"1m"==this.period?numDays=30:"3m"==this.period?numDays=90:"1y"==this.period?numDays=365:"custom"==this.period&&(numDays=this.customDays),numDays},this.getPeriodByDays=function(numdays){let period;if("custom"===this.period)return this.period;switch(numdays){case 7:period="7d";break;case 15:period="15d";break;case 30:period="1m";break;case 90:period="3m";break;case 365:period="1y";break;default:period="7d"}return period},this.setPeriod=function(date,period,datetype){if(this.period=period,"custom"===period&&void 0!==datetype)return void("start"==datetype?this.setCustomPeriod(date,this.enddate,1):this.setCustomPeriod(this.startdate,date,1));startdate=date,this.startdate=startdate;let sdate=new Date(startdate+"T00:00:00"),enddate=new Date(sdate),prevdate=new Date(sdate),numDays=this.getNumberOfDays();enddate.setUTCDate(enddate.getUTCDate()-numDays),prevdate.setUTCDate(prevdate.getUTCDate()-2*numDays),this.enddate=this.toUTCDate(enddate),this.prevdate=this.toUTCDate(prevdate)},this.setCustomPeriod=function(startdate,enddate,incDays=0){ams.Utils.assert("string"==typeof startdate),ams.Utils.assert("string"==typeof enddate),startdate=ams.Date.fromString(startdate),enddate=ams.Date.fromString(enddate),this.period="custom",this.customDays=ams.Date.differenceInDays(startdate,enddate)-incDays,this.startdate=this.toUTCDate(startdate),this.enddate=this.toUTCDate(enddate);let prevdate=enddate;prevdate.setUTCDate(prevdate.getUTCDate()-this.customDays),this.prevdate=this.toUTCDate(prevdate)},this.disableCustomPeriod=function(){this.period=null,this.customDays=null},this.getPeriod=function(){return this.period}},fromString:function(dateStr,format="yyyy-mm-dd"){if(ams.Utils.assert(["dd/mm/yyyy","yyyy-mm-dd"].includes(format)),"dd/mm/yyyy"===format){let parts=dateStr.split("/");return new Date(parts[2]+"-"+parts[1]+"-"+parts[0]+"T00:00:00")}return new Date(dateStr+"T00:00:00")},differenceInDays:function(date1,date2){return Math.round(Math.abs(date1-date2)/864e5)+1},addDays:function(date,days){return ams.Utils.assert(date instanceof Date),date.setUTCDate(date.getUTCDate()+days),ams.Date.DateController.toUTCDate(date)}},"undefined"!=typeof module&&(module.exports.ams=ams,module.exports.ams.Date.DateController=ams.Date.DateController);